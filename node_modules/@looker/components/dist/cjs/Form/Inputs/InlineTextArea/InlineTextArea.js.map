{"version":3,"file":"InlineTextArea.js","names":["_react","_interopRequireWildcard","require","_isFunction","_interopRequireDefault","_styledComponents","_designTokens","_InputProps","_templateObject","_templateObject2","_templateObject3","_excluded","obj","__esModule","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","_typeof","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","_taggedTemplateLiteral","strings","raw","slice","freeze","defineProperties","value","_extends","assign","bind","target","i","arguments","length","source","apply","_slicedToArray","arr","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","TypeError","o","minLen","_arrayLikeToArray","n","toString","constructor","name","Array","from","test","len","arr2","_i","Symbol","iterator","_s","_e","_x","_r","_arr","_n","_d","next","done","push","err","isArray","_objectWithoutProperties","excluded","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","indexOf","propertyIsEnumerable","sourceKeys","keys","InlineTextAreaLayout","forwardRef","_ref","ref","className","onChange","underlineOnlyOnHover","_ref$value","valueProp","placeholder","props","_useState","useState","_useState2","setValueChange","displayValue","isFunction","handleValueChange","event","currentTarget","handleChange","createElement","Input","pickInputProps","VisibleText","exports","styled","textarea","withConfig","displayName","componentId","_ref2","theme","colors","text5","_ref3","readOnly","disabled","undefined","div","_ref4","text1","InlineTextArea","typography","_ref5","ui3","_ref6","_ref7","lineHeights","medium","_ref8","ui1","_ref9","_ref10","_ref11"],"sources":["../../../../../src/Form/Inputs/InlineTextArea/InlineTextArea.tsx"],"sourcesContent":["/*\n\n MIT License\n\n Copyright (c) 2022 Looker Data Sciences, Inc.\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated documentation files (the \"Software\"), to deal\n in the Software without restriction, including without limitation the rights\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n copies of the Software, and to permit persons to whom the Software is\n furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in all\n copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n SOFTWARE.\n\n */\n\nimport type { ChangeEvent, Ref } from 'react';\nimport React, { forwardRef, useState } from 'react';\nimport isFunction from 'lodash/isFunction';\nimport styled from 'styled-components';\nimport type {\n  TypographyProps,\n  SpaceProps,\n  CompatibleHTMLProps,\n  LayoutProps,\n} from '@looker/design-tokens';\nimport { typography } from '@looker/design-tokens';\nimport { pickInputProps } from '../InputProps';\n\nexport interface InlineTextAreaProps\n  extends Omit<LayoutProps, 'size'>,\n    SpaceProps,\n    TypographyProps,\n    CompatibleHTMLProps<HTMLTextAreaElement> {\n  underlineOnlyOnHover?: boolean;\n  value?: string;\n}\n\nexport const InlineTextAreaLayout = forwardRef(\n  (\n    {\n      className,\n      onChange,\n      underlineOnlyOnHover,\n      value: valueProp = '',\n      placeholder,\n      ...props\n    }: InlineTextAreaProps,\n    ref: Ref<HTMLTextAreaElement>\n  ) => {\n    const [value, setValueChange] = useState(valueProp);\n\n    const displayValue = isFunction(onChange) ? valueProp : value;\n\n    const handleValueChange = (event: ChangeEvent<HTMLTextAreaElement>) => {\n      setValueChange(event.currentTarget.value);\n    };\n\n    const handleChange = isFunction(onChange) ? onChange : handleValueChange;\n\n    return (\n      <div className={className} data-testid=\"inline-text-area\">\n        <Input\n          onChange={handleChange}\n          ref={ref}\n          underlineOnlyOnHover={underlineOnlyOnHover}\n          value={displayValue}\n          {...pickInputProps(props)}\n        />\n        <VisibleText displayValue={displayValue}>\n          {displayValue || placeholder}\n          {`\\u00A0`}\n        </VisibleText>\n      </div>\n    );\n  }\n);\n\nconst Input = styled.textarea<InlineTextAreaProps>`\n  background: transparent;\n  border: none;\n  caret-color: ${({ theme }) => theme.colors.text5};\n  color: transparent;\n  cursor: ${({ readOnly, disabled }) =>\n    readOnly || disabled ? 'not-allowed' : undefined};\n  font: inherit;\n  height: 100%;\n  left: 0;\n  margin: 0; /* override browser default(s) */\n  outline: none;\n  overflow: hidden;\n  padding: 0;\n  position: absolute;\n  resize: none;\n  text-align: inherit;\n  text-transform: inherit;\n  top: 0;\n  vertical-align: top; /* textarea is inline-block so this removes 4px generated below */\n  width: 100%;\n`;\n\ninterface VisibleTextProps {\n  displayValue?: string;\n}\n\nconst VisibleText = styled.div<VisibleTextProps>`\n  color: ${({ displayValue, theme }) =>\n    displayValue ? 'inherit' : theme.colors.text1};\n  white-space: pre-wrap;\n`;\n\nexport const InlineTextArea = styled(InlineTextAreaLayout)`\n  ${typography}\n  font: inherit;\n  border: none;\n  border-bottom: 1px dashed;\n  border-bottom-color: ${({ theme, underlineOnlyOnHover, readOnly }) =>\n    underlineOnlyOnHover || readOnly ? 'transparent' : theme.colors.ui3};\n  color: ${({ disabled, theme }) =>\n    disabled ? theme.colors.text1 : 'inherit'};\n  display: inline-flex;\n  flex-direction: column;\n  justify-content: center;\n  min-height: ${({ theme }) => theme.lineHeights.medium};\n  min-width: 2rem;\n  position: relative;\n  text-align: inherit;\n  white-space: pre-wrap;\n\n  :focus,\n  :hover {\n    background-color: ${({ theme }) => theme.colors.ui1};\n    border-bottom-color: ${({ theme }) => theme.colors.key};\n    outline: none;\n  }\n\n  :focus {\n    border-bottom-style: solid;\n  }\n\n  :disabled,\n  :hover {\n    border-bottom-color: ${({ theme }) => theme.colors.text1};\n  }\n\n  :hover {\n    border-bottom-color: ${({ readOnly }) => readOnly && 'transparent'};\n  }\n`;\n"],"mappings":"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"}