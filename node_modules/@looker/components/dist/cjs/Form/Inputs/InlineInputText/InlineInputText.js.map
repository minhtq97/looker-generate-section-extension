{"version":3,"file":"InlineInputText.js","names":["_react","_interopRequireWildcard","require","_isFunction","_interopRequireDefault","_styledComponents","_designTokens","_InputProps","_innerInputStyle","_templateObject","_templateObject2","_templateObject3","_templateObject4","_excluded","obj","__esModule","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","_typeof","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","_taggedTemplateLiteral","strings","raw","slice","freeze","defineProperties","value","_extends","assign","bind","target","i","arguments","length","source","apply","_slicedToArray","arr","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","TypeError","o","minLen","_arrayLikeToArray","n","toString","constructor","name","Array","from","test","len","arr2","_i","Symbol","iterator","_s","_e","_x","_r","_arr","_n","_d","next","done","push","err","isArray","_objectWithoutProperties","excluded","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","indexOf","propertyIsEnumerable","sourceKeys","keys","InlineInputTextLayout","forwardRef","_ref","ref","className","defaultValue","onChange","placeholder","_ref$type","type","valueProp","props","_useState","useState","_useState2","setValueChange","displayValue","isFunction","handleValueChange","event","handleChange","createElement","StyledInput","omitStyledProps","pickInputProps","StyledText","styled","input","withConfig","displayName","componentId","innerInputStyle","_ref2","readOnly","disabled","undefined","span","InlineInputTextBase","exports","InlineInputText","typography","_ref3","theme","underlineOnlyOnHover","simple","colors","ui3","_ref4","ui1","_ref5","_ref6","text1","_ref7","_ref8","_ref9"],"sources":["../../../../../src/Form/Inputs/InlineInputText/InlineInputText.tsx"],"sourcesContent":["/*\n\n MIT License\n\n Copyright (c) 2022 Looker Data Sciences, Inc.\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated documentation files (the \"Software\"), to deal\n in the Software without restriction, including without limitation the rights\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n copies of the Software, and to permit persons to whom the Software is\n furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in all\n copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n SOFTWARE.\n\n */\n\nimport type { ChangeEvent, Ref } from 'react';\nimport React, { forwardRef, useState } from 'react';\nimport isFunction from 'lodash/isFunction';\nimport styled from 'styled-components';\nimport type { TypographyProps } from '@looker/design-tokens';\nimport { omitStyledProps, typography } from '@looker/design-tokens';\nimport type { InputProps, InputTextTypeProps } from '../InputProps';\nimport { pickInputProps } from '../InputProps';\nimport { innerInputStyle } from '../innerInputStyle';\n\nexport interface InlineInputTextProps\n  extends TypographyProps,\n    Omit<InputProps, 'type'>,\n    InputTextTypeProps {\n  underlineOnlyOnHover?: boolean;\n  simple?: boolean;\n}\n\nconst InlineInputTextLayout = forwardRef(\n  (\n    {\n      className,\n      defaultValue,\n      onChange,\n      placeholder,\n      type = 'text',\n      value: valueProp,\n      ...props\n    }: InlineInputTextProps,\n    ref: Ref<HTMLInputElement>\n  ) => {\n    const [value, setValueChange] = useState(valueProp || defaultValue || '');\n\n    const displayValue = isFunction(onChange) ? valueProp : value;\n\n    const handleValueChange = (event: ChangeEvent<HTMLInputElement>) => {\n      setValueChange(event.target.value);\n    };\n\n    const handleChange = isFunction(onChange) ? onChange : handleValueChange;\n\n    return (\n      <span className={className}>\n        <StyledInput\n          onChange={handleChange}\n          value={displayValue}\n          placeholder={placeholder}\n          type={type}\n          ref={ref}\n          {...omitStyledProps(pickInputProps(props))}\n        />\n        <StyledText>{displayValue || placeholder || ' '}</StyledText>\n      </span>\n    );\n  }\n);\n\nconst StyledInput = styled.input`\n  ${innerInputStyle}\n  cursor: ${({ readOnly, disabled }) =>\n    readOnly || disabled ? 'not-allowed' : undefined};\n  font: inherit;\n  left: 0;\n  padding: 0;\n  position: absolute;\n  text-align: inherit;\n  text-transform: inherit;\n  top: 0;\n  &::-webkit-outer-spin-button,\n  &::-webkit-inner-spin-button {\n    appearance: none;\n  }\n  &[type='number'] {\n    appearance: textfield;\n  }\n`;\n\nconst StyledText = styled.span`\n  align-self: center;\n  color: transparent;\n  line-height: inherit;\n  /* max-width & overflow keep this span from blocking the x button\n  in InputSearch, etc, with autoResize and maxWidth */\n  max-width: 100%;\n  overflow: hidden;\n  text-align: inherit;\n  white-space: pre;\n`;\n\nexport const InlineInputTextBase = styled(InlineInputTextLayout)`\n  display: inline-flex;\n  justify-content: center;\n  min-width: 2rem;\n  position: relative;\n`;\n\nexport const InlineInputText = styled(InlineInputTextBase)`\n  ${typography}\n  border: none;\n  border-bottom: 1px dashed;\n  border-bottom-color: ${({ theme, underlineOnlyOnHover, simple, readOnly }) =>\n    underlineOnlyOnHover || simple || readOnly\n      ? 'transparent'\n      : theme.colors.ui3};\n  color: inherit;\n  flex-direction: column;\n  max-width: 100%;\n  overflow: hidden;\n  text-align: inherit;\n\n  :focus,\n  :hover {\n    background-color: ${({ theme }) => theme.colors.ui1};\n    border-bottom-color: ${({ theme }) => theme.colors.key};\n    outline: none;\n  }\n\n  :focus {\n    border-bottom-style: solid;\n  }\n\n  :disabled,\n  :hover {\n    border-bottom-color: ${({ theme }) => theme.colors.text1};\n  }\n\n  :hover {\n    border-bottom-color: ${({ readOnly }) => readOnly && 'transparent'};\n  }\n\n  input:disabled {\n    color: ${({ theme }) => theme.colors.text1};\n    -webkit-text-fill-color: ${({ theme }) => theme.colors.text1};\n  }\n`;\n"],"mappings":"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"}