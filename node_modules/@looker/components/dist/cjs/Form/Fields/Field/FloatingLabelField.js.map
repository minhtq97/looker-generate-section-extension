{"version":3,"file":"FloatingLabelField.js","names":["_designTokens","require","_react","_interopRequireWildcard","_styledComponents","_Layout","_constants","_Fieldset","_Field","_FieldDetail","_FieldLabel","_HelperText","_InputArea","_useFloatingLabel2","_excluded","_excluded2","_templateObject","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","_typeof","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","_extends","assign","bind","target","i","arguments","length","source","apply","_objectWithoutProperties","excluded","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","indexOf","propertyIsEnumerable","sourceKeys","keys","_taggedTemplateLiteral","strings","raw","slice","freeze","defineProperties","value","getLabelColor","isFocused","validationMessage","type","undefined","FloatingLabelField","styled","_ref","className","propsExternalLabel","externalLabel","props","ariaLabelOnly","children","detail","disabled","hideLabel","id","inline","label","required","labelOffset","hasValue","checkValueOnBlur","rest","_useFloatingLabel","useFloatingLabel","labelPositionClass","handlers","style","_useTheme","useTheme","defaults","_useContext","useContext","FieldsetContext","fieldsHideLabel","createElement","Field","concat","InputArea","FieldLabel","fontWeight","color","Space","width","align","HelperText","FieldDetail","pt","withConfig","displayName","componentId","_ref2","autoResize","_ref3","DISABLED_OPACITY","_ref4","theme","fontSizes","xsmall","_ref5","_ref6","colors","field","_ref7","radii","small","_ref8","_ref9","space","u2","_ref10","u1","_ref11","transitions","rapid","_ref12","_ref13","_ref14","u3","exports"],"sources":["../../../../../src/Form/Fields/Field/FloatingLabelField.tsx"],"sourcesContent":["/*\n\n MIT License\n\n Copyright (c) 2022 Looker Data Sciences, Inc.\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated documentation files (the \"Software\"), to deal\n in the Software without restriction, including without limitation the rights\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n copies of the Software, and to permit persons to whom the Software is\n furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in all\n copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n SOFTWARE.\n\n */\n\nimport type { StatefulColor } from '@looker/design-tokens';\nimport { width } from '@looker/design-tokens';\nimport React, { useContext } from 'react';\nimport styled, { useTheme } from 'styled-components';\nimport { Space } from '../../../Layout';\nimport type { ValidationMessageProps } from '../../ValidationMessage';\nimport { DISABLED_OPACITY } from '../../constants';\nimport { FieldsetContext } from '../../../Fieldset';\nimport { Field } from './Field';\nimport { FieldDetail } from './FieldDetail';\nimport { FieldLabel } from './FieldLabel';\nimport { HelperText } from './HelperText';\nimport { InputArea } from './InputArea';\nimport type { FloatingLabelFieldPropsInternal } from './types';\nimport { useFloatingLabel } from './useFloatingLabel';\n\nconst getLabelColor = (\n  isFocused: boolean,\n  validationMessage?: ValidationMessageProps\n): StatefulColor | undefined => {\n  if (validationMessage?.type === 'error') return 'critical';\n  if (isFocused) return 'key';\n  return undefined;\n};\n\nexport const FloatingLabelField = styled(\n  ({\n    className,\n    externalLabel: propsExternalLabel,\n    // All other props can be forwarded to Field if that is rendered instead\n    ...props\n  }: FloatingLabelFieldPropsInternal) => {\n    const {\n      ariaLabelOnly,\n      children,\n      detail,\n      disabled,\n      hideLabel,\n      id,\n      inline,\n      label,\n      required,\n      labelOffset,\n      hasValue,\n      checkValueOnBlur,\n      ...rest\n    } = props;\n    const {\n      className: labelPositionClass,\n      isFocused,\n      handlers,\n      style,\n    } = useFloatingLabel({\n      checkValueOnBlur,\n      hasValue,\n      labelOffset,\n    });\n\n    const {\n      defaults: { externalLabel },\n    } = useTheme();\n\n    const { fieldsHideLabel } = useContext(FieldsetContext);\n\n    if (\n      externalLabel ||\n      propsExternalLabel ||\n      !label ||\n      hideLabel ||\n      fieldsHideLabel ||\n      inline\n    ) {\n      return <Field {...props} className={className} />;\n    }\n\n    return (\n      <div\n        className={`${className} ${labelPositionClass} floating`}\n        style={style}\n        data-disabled={disabled}\n      >\n        <InputArea {...handlers}>{children}</InputArea>\n        <FieldLabel\n          ariaLabelOnly={ariaLabelOnly}\n          id={id}\n          label={label}\n          hideLabel={hideLabel}\n          required={required}\n          fontWeight=\"normal\"\n          color={getLabelColor(isFocused, props.validationMessage)}\n        />\n        <Space width=\"auto\" align=\"start\">\n          <HelperText id={id} {...rest} />\n          {detail && (\n            <FieldDetail pt=\"u2\" color=\"text2\">\n              {detail}\n            </FieldDetail>\n          )}\n        </Space>\n      </div>\n    );\n  }\n)`\n  &.floating {\n    display: ${({ autoResize }) => (autoResize ? 'inline-block' : 'block')};\n    opacity: ${({ disabled }) => (disabled ? DISABLED_OPACITY : '1')};\n    /* Make the top border intersect the the middle of the label */\n    padding-top: calc(${({ theme }) => theme.fontSizes.xsmall} / 2);\n    position: relative;\n    width: ${({ autoResize }) => (autoResize ? 'fit-content' : '100%')};\n    ${width}\n\n    label {\n      background: ${({ theme }) => theme.colors.field};\n      border-radius: ${({ theme }) => theme.radii.small};\n      font-size: ${({ theme }) => theme.fontSizes.xsmall};\n      /* Align with the input contents, compensate for left border */\n      left: calc(${({ theme }) => theme.space.u2} + 1px);\n      line-height: initial;\n      padding: 0 ${({ theme }) => theme.space.u1};\n      position: absolute;\n      top: 0;\n      transition: ${({ theme }) => theme.transitions.rapid}ms;\n    }\n    &.label-down {\n      label {\n        font-size: ${({ theme }) => theme.fontSizes.small};\n        pointer-events: none;\n        transform: translate(var(--label-translate, 0));\n      }\n      input::placeholder,\n      textarea::placeholder {\n        color: ${({ theme }) => theme.colors.field};\n      }\n    }\n\n    & > ${Space} {\n      /* Align with the input contents, compensate for left border */\n      margin: 0 calc(${({ theme }) => theme.space.u3} + 1px);\n    }\n  }\n`;\n"],"mappings":";;;;;;;AA2BA,IAAAA,aAAA,GAAAC,OAAA;AACA,IAAAC,MAAA,GAAAC,uBAAA,CAAAF,OAAA;AACA,IAAAG,iBAAA,GAAAD,uBAAA,CAAAF,OAAA;AACA,IAAAI,OAAA,GAAAJ,OAAA;AAEA,IAAAK,UAAA,GAAAL,OAAA;AACA,IAAAM,SAAA,GAAAN,OAAA;AACA,IAAAO,MAAA,GAAAP,OAAA;AACA,IAAAQ,YAAA,GAAAR,OAAA;AACA,IAAAS,WAAA,GAAAT,OAAA;AACA,IAAAU,WAAA,GAAAV,OAAA;AACA,IAAAW,UAAA,GAAAX,OAAA;AAEA,IAAAY,kBAAA,GAAAZ,OAAA;AAAsD,IAAAa,SAAA;EAAAC,UAAA;AAAA,IAAAC,eAAA;AAAA,SAAAC,yBAAAC,WAAA,eAAAC,OAAA,kCAAAC,iBAAA,OAAAD,OAAA,QAAAE,gBAAA,OAAAF,OAAA,YAAAF,wBAAA,YAAAA,yBAAAC,WAAA,WAAAA,WAAA,GAAAG,gBAAA,GAAAD,iBAAA,KAAAF,WAAA;AAAA,SAAAf,wBAAAmB,GAAA,EAAAJ,WAAA,SAAAA,WAAA,IAAAI,GAAA,IAAAA,GAAA,CAAAC,UAAA,WAAAD,GAAA,QAAAA,GAAA,aAAAE,OAAA,CAAAF,GAAA,yBAAAA,GAAA,uCAAAA,GAAA,UAAAG,KAAA,GAAAR,wBAAA,CAAAC,WAAA,OAAAO,KAAA,IAAAA,KAAA,CAAAC,GAAA,CAAAJ,GAAA,YAAAG,KAAA,CAAAE,GAAA,CAAAL,GAAA,SAAAM,MAAA,WAAAC,qBAAA,GAAAC,MAAA,CAAAC,cAAA,IAAAD,MAAA,CAAAE,wBAAA,WAAAC,GAAA,IAAAX,GAAA,QAAAW,GAAA,kBAAAH,MAAA,CAAAI,SAAA,CAAAC,cAAA,CAAAC,IAAA,CAAAd,GAAA,EAAAW,GAAA,SAAAI,IAAA,GAAAR,qBAAA,GAAAC,MAAA,CAAAE,wBAAA,CAAAV,GAAA,EAAAW,GAAA,cAAAI,IAAA,KAAAA,IAAA,CAAAV,GAAA,IAAAU,IAAA,CAAAC,GAAA,KAAAR,MAAA,CAAAC,cAAA,CAAAH,MAAA,EAAAK,GAAA,EAAAI,IAAA,YAAAT,MAAA,CAAAK,GAAA,IAAAX,GAAA,CAAAW,GAAA,SAAAL,MAAA,cAAAN,GAAA,MAAAG,KAAA,IAAAA,KAAA,CAAAa,GAAA,CAAAhB,GAAA,EAAAM,MAAA,YAAAA,MAAA;AAAA,SAAAW,SAAA,IAAAA,QAAA,GAAAT,MAAA,CAAAU,MAAA,GAAAV,MAAA,CAAAU,MAAA,CAAAC,IAAA,eAAAC,MAAA,aAAAC,CAAA,MAAAA,CAAA,GAAAC,SAAA,CAAAC,MAAA,EAAAF,CAAA,UAAAG,MAAA,GAAAF,SAAA,CAAAD,CAAA,YAAAV,GAAA,IAAAa,MAAA,QAAAhB,MAAA,CAAAI,SAAA,CAAAC,cAAA,CAAAC,IAAA,CAAAU,MAAA,EAAAb,GAAA,KAAAS,MAAA,CAAAT,GAAA,IAAAa,MAAA,CAAAb,GAAA,gBAAAS,MAAA,YAAAH,QAAA,CAAAQ,KAAA,OAAAH,SAAA;AAAA,SAAAI,yBAAAF,MAAA,EAAAG,QAAA,QAAAH,MAAA,yBAAAJ,MAAA,GAAAQ,6BAAA,CAAAJ,MAAA,EAAAG,QAAA,OAAAhB,GAAA,EAAAU,CAAA,MAAAb,MAAA,CAAAqB,qBAAA,QAAAC,gBAAA,GAAAtB,MAAA,CAAAqB,qBAAA,CAAAL,MAAA,QAAAH,CAAA,MAAAA,CAAA,GAAAS,gBAAA,CAAAP,MAAA,EAAAF,CAAA,MAAAV,GAAA,GAAAmB,gBAAA,CAAAT,CAAA,OAAAM,QAAA,CAAAI,OAAA,CAAApB,GAAA,uBAAAH,MAAA,CAAAI,SAAA,CAAAoB,oBAAA,CAAAlB,IAAA,CAAAU,MAAA,EAAAb,GAAA,aAAAS,MAAA,CAAAT,GAAA,IAAAa,MAAA,CAAAb,GAAA,cAAAS,MAAA;AAAA,SAAAQ,8BAAAJ,MAAA,EAAAG,QAAA,QAAAH,MAAA,yBAAAJ,MAAA,WAAAa,UAAA,GAAAzB,MAAA,CAAA0B,IAAA,CAAAV,MAAA,OAAAb,GAAA,EAAAU,CAAA,OAAAA,CAAA,MAAAA,CAAA,GAAAY,UAAA,CAAAV,MAAA,EAAAF,CAAA,MAAAV,GAAA,GAAAsB,UAAA,CAAAZ,CAAA,OAAAM,QAAA,CAAAI,OAAA,CAAApB,GAAA,kBAAAS,MAAA,CAAAT,GAAA,IAAAa,MAAA,CAAAb,GAAA,YAAAS,MAAA;AAAA,SAAAe,uBAAAC,OAAA,EAAAC,GAAA,SAAAA,GAAA,IAAAA,GAAA,GAAAD,OAAA,CAAAE,KAAA,cAAA9B,MAAA,CAAA+B,MAAA,CAAA/B,MAAA,CAAAgC,gBAAA,CAAAJ,OAAA,IAAAC,GAAA,IAAAI,KAAA,EAAAjC,MAAA,CAAA+B,MAAA,CAAAF,GAAA;AAEtD,IAAMK,aAAa,GAAG,SAAhBA,aAAaA,CACjBC,SAAkB,EAClBC,iBAA0C,EACZ;EAC9B,IAAI,CAAAA,iBAAiB,aAAjBA,iBAAiB,uBAAjBA,iBAAiB,CAAEC,IAAI,MAAK,OAAO,EAAE,OAAO,UAAU;EAC1D,IAAIF,SAAS,EAAE,OAAO,KAAK;EAC3B,OAAOG,SAAS;AAClB,CAAC;AAEM,IAAMC,kBAAkB,GAAG,IAAAC,4BAAM,EACtC,UAAAC,IAAA,EAKuC;EAAA,IAJrCC,SAAS,GAAAD,IAAA,CAATC,SAAS;IACMC,kBAAkB,GAAAF,IAAA,CAAjCG,aAAa;IAEVC,KAAK,GAAA3B,wBAAA,CAAAuB,IAAA,EAAAzD,SAAA;EAER,IACE8D,aAAa,GAaXD,KAAK,CAbPC,aAAa;IACbC,QAAQ,GAYNF,KAAK,CAZPE,QAAQ;IACRC,MAAM,GAWJH,KAAK,CAXPG,MAAM;IACNC,QAAQ,GAUNJ,KAAK,CAVPI,QAAQ;IACRC,SAAS,GASPL,KAAK,CATPK,SAAS;IACTC,EAAE,GAQAN,KAAK,CARPM,EAAE;IACFC,MAAM,GAOJP,KAAK,CAPPO,MAAM;IACNC,KAAK,GAMHR,KAAK,CANPQ,KAAK;IACLC,QAAQ,GAKNT,KAAK,CALPS,QAAQ;IACRC,WAAW,GAITV,KAAK,CAJPU,WAAW;IACXC,QAAQ,GAGNX,KAAK,CAHPW,QAAQ;IACRC,gBAAgB,GAEdZ,KAAK,CAFPY,gBAAgB;IACbC,IAAI,GAAAxC,wBAAA,CACL2B,KAAK,EAAA5D,UAAA;EACT,IAAA0E,iBAAA,GAKI,IAAAC,mCAAgB,EAAC;MACnBH,gBAAgB,EAAhBA,gBAAgB;MAChBD,QAAQ,EAARA,QAAQ;MACRD,WAAW,EAAXA;IACF,CAAC,CAAC;IARWM,kBAAkB,GAAAF,iBAAA,CAA7BjB,SAAS;IACTP,SAAS,GAAAwB,iBAAA,CAATxB,SAAS;IACT2B,QAAQ,GAAAH,iBAAA,CAARG,QAAQ;IACRC,KAAK,GAAAJ,iBAAA,CAALI,KAAK;EAOP,IAAAC,SAAA,GAEI,IAAAC,0BAAQ,EAAC,CAAC;IADArB,aAAa,GAAAoB,SAAA,CAAzBE,QAAQ,CAAItB,aAAa;EAG3B,IAAAuB,WAAA,GAA4B,IAAAC,iBAAU,EAACC,yBAAe,CAAC;IAA/CC,eAAe,GAAAH,WAAA,CAAfG,eAAe;EAEvB,IACE1B,aAAa,IACbD,kBAAkB,IAClB,CAACU,KAAK,IACNH,SAAS,IACToB,eAAe,IACflB,MAAM,EACN;IACA,OAAOhF,MAAA,YAAAmG,aAAA,CAAC7F,MAAA,CAAA8F,KAAK,EAAA/D,QAAA,KAAKoC,KAAK;MAAEH,SAAS,EAAEA;IAAU,EAAE,CAAC;EACnD;EAEA,OACEtE,MAAA,YAAAmG,aAAA;IACE7B,SAAS,KAAA+B,MAAA,CAAK/B,SAAS,OAAA+B,MAAA,CAAIZ,kBAAkB,cAAY;IACzDE,KAAK,EAAEA,KAAM;IACb,iBAAed;EAAS,GAExB7E,MAAA,YAAAmG,aAAA,CAACzF,UAAA,CAAA4F,SAAS,EAAKZ,QAAQ,EAAGf,QAAoB,CAAC,EAC/C3E,MAAA,YAAAmG,aAAA,CAAC3F,WAAA,CAAA+F,UAAU;IACT7B,aAAa,EAAEA,aAAc;IAC7BK,EAAE,EAAEA,EAAG;IACPE,KAAK,EAAEA,KAAM;IACbH,SAAS,EAAEA,SAAU;IACrBI,QAAQ,EAAEA,QAAS;IACnBsB,UAAU,EAAC,QAAQ;IACnBC,KAAK,EAAE3C,aAAa,CAACC,SAAS,EAAEU,KAAK,CAACT,iBAAiB;EAAE,CAC1D,CAAC,EACFhE,MAAA,YAAAmG,aAAA,CAAChG,OAAA,CAAAuG,KAAK;IAACC,KAAK,EAAC,MAAM;IAACC,KAAK,EAAC;EAAO,GAC/B5G,MAAA,YAAAmG,aAAA,CAAC1F,WAAA,CAAAoG,UAAU,EAAAxE,QAAA;IAAC0C,EAAE,EAAEA;EAAG,GAAKO,IAAI,CAAG,CAAC,EAC/BV,MAAM,IACL5E,MAAA,YAAAmG,aAAA,CAAC5F,YAAA,CAAAuG,WAAW;IAACC,EAAE,EAAC,IAAI;IAACN,KAAK,EAAC;EAAO,GAC/B7B,MACU,CAEV,CACJ,CAAC;AAEV,CACF,CAAC,CAAAoC,UAAA;EAAAC,WAAA;EAAAC,WAAA;AAAA,GAAApG,eAAA,KAAAA,eAAA,GAAAyC,sBAAA,y6BAEc,UAAA4D,KAAA;EAAA,IAAGC,UAAU,GAAAD,KAAA,CAAVC,UAAU;EAAA,OAAQA,UAAU,GAAG,cAAc,GAAG,OAAO;AAAA,CAAC,EAC3D,UAAAC,KAAA;EAAA,IAAGxC,QAAQ,GAAAwC,KAAA,CAARxC,QAAQ;EAAA,OAAQA,QAAQ,GAAGyC,2BAAgB,GAAG,GAAG;AAAA,CAAC,EAE5C,UAAAC,KAAA;EAAA,IAAGC,KAAK,GAAAD,KAAA,CAALC,KAAK;EAAA,OAAOA,KAAK,CAACC,SAAS,CAACC,MAAM;AAAA,GAEhD,UAAAC,KAAA;EAAA,IAAGP,UAAU,GAAAO,KAAA,CAAVP,UAAU;EAAA,OAAQA,UAAU,GAAG,aAAa,GAAG,MAAM;AAAA,CAAC,EAChET,mBAAK,EAGS,UAAAiB,KAAA;EAAA,IAAGJ,KAAK,GAAAI,KAAA,CAALJ,KAAK;EAAA,OAAOA,KAAK,CAACK,MAAM,CAACC,KAAK;AAAA,GAC9B,UAAAC,KAAA;EAAA,IAAGP,KAAK,GAAAO,KAAA,CAALP,KAAK;EAAA,OAAOA,KAAK,CAACQ,KAAK,CAACC,KAAK;AAAA,GACpC,UAAAC,KAAA;EAAA,IAAGV,KAAK,GAAAU,KAAA,CAALV,KAAK;EAAA,OAAOA,KAAK,CAACC,SAAS,CAACC,MAAM;AAAA,GAErC,UAAAS,KAAA;EAAA,IAAGX,KAAK,GAAAW,KAAA,CAALX,KAAK;EAAA,OAAOA,KAAK,CAACY,KAAK,CAACC,EAAE;AAAA,GAE7B,UAAAC,MAAA;EAAA,IAAGd,KAAK,GAAAc,MAAA,CAALd,KAAK;EAAA,OAAOA,KAAK,CAACY,KAAK,CAACG,EAAE;AAAA,GAG5B,UAAAC,MAAA;EAAA,IAAGhB,KAAK,GAAAgB,MAAA,CAALhB,KAAK;EAAA,OAAOA,KAAK,CAACiB,WAAW,CAACC,KAAK;AAAA,GAIrC,UAAAC,MAAA;EAAA,IAAGnB,KAAK,GAAAmB,MAAA,CAALnB,KAAK;EAAA,OAAOA,KAAK,CAACC,SAAS,CAACQ,KAAK;AAAA,GAMxC,UAAAW,MAAA;EAAA,IAAGpB,KAAK,GAAAoB,MAAA,CAALpB,KAAK;EAAA,OAAOA,KAAK,CAACK,MAAM,CAACC,KAAK;AAAA,GAIxCpB,aAAK,EAEQ,UAAAmC,MAAA;EAAA,IAAGrB,KAAK,GAAAqB,MAAA,CAALrB,KAAK;EAAA,OAAOA,KAAK,CAACY,KAAK,CAACU,EAAE;AAAA,EAGnD;AAACC,OAAA,CAAA5E,kBAAA,GAAAA,kBAAA"}