{"version":3,"file":"useClickable.js","names":["_react","require","_useFocusVisible2","_excluded","_excluded2","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","obj","value","_toPropertyKey","configurable","writable","arg","_toPrimitive","_typeof","String","input","hint","prim","Symbol","toPrimitive","undefined","res","call","TypeError","Number","_objectWithoutProperties","excluded","_objectWithoutPropertiesLoose","sourceSymbolKeys","indexOf","prototype","propertyIsEnumerable","sourceKeys","useClickable","_ref","onClick","disabled","role","rest","_useFocusVisible","useFocusVisible","onKeyUp","focusVisibleProps","useMemo","e","shouldHandle","currentTarget","tabIndex"],"sources":["../../../src/utils/useClickable.ts"],"sourcesContent":["/**\n * Copyright (c) 2023 Google LLC\n * SPDX-License-Identifier: MIT\n */\n\nimport type { CompatibleHTMLProps } from '@looker/design-tokens';\nimport type { KeyboardEvent, MouseEvent as ReactMouseEvent } from 'react';\nimport { useMemo } from 'react';\nimport type { FocusVisibleProps } from './useFocusVisible';\nimport { useFocusVisible } from './useFocusVisible';\n\n// Helper interfaces for components using this hook\nexport type GenericOnClick<E extends HTMLElement> = (\n  e: ReactMouseEvent<E, MouseEvent> | KeyboardEvent<E>\n) => void;\n\nexport interface GenericClickProps<E extends HTMLElement>\n  extends Omit<CompatibleHTMLProps<E>, 'onClick'> {\n  onClick?: GenericOnClick<E>;\n}\n\ntype Attributes = 'disabled' | 'onBlur' | 'onKeyUp' | 'role';\n\nexport interface UseClickableProps<E extends HTMLElement>\n  extends Pick<CompatibleHTMLProps<E>, Attributes>,\n    Pick<GenericClickProps<E>, 'onClick'> {}\n\nexport interface UseClickableResult<E extends HTMLElement>\n  extends Pick<CompatibleHTMLProps<E>, Attributes | 'onClick' | 'tabIndex'>,\n    FocusVisibleProps {}\n/**\n * This hook provides keyboard accessibility for any component that renders a non-button element\n * that is both focus-able and clickable. The component should handle styling for focusVisible.\n */\nexport function useClickable<E extends HTMLElement>({\n  onClick,\n  disabled,\n  role,\n  ...rest\n}: UseClickableProps<E>): UseClickableResult<E> {\n  const { onKeyUp, ...focusVisibleProps } = useFocusVisible(rest);\n\n  return useMemo(\n    () => ({\n      disabled,\n      ...focusVisibleProps,\n      onClick: (e: ReactMouseEvent<E, MouseEvent>) => {\n        if (!disabled) {\n          // use onClick from useFocusVisible â€“ it's the true click handler\n          onClick?.(e);\n        }\n      },\n      onKeyUp: (e: KeyboardEvent<E>) => {\n        const shouldHandle = !disabled && e.currentTarget === e.target;\n        if (shouldHandle) {\n          switch (e.key) {\n            case 'Enter':\n            case ' ':\n              onClick?.(e);\n              break;\n          }\n        }\n        onKeyUp(e);\n      },\n      // if onClick is used, role should be 'button' unless otherwise specified\n      // otherwise undefined b/c depending on usage, 'button' could be misleading\n      role: role || (onClick ? 'button' : undefined),\n      tabIndex: disabled ? undefined : 0,\n    }),\n    [disabled, role, onClick, onKeyUp, focusVisibleProps]\n  );\n}\n"],"mappings":"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"}