{"version":3,"file":"formatDateString.js","names":["_i18n","require","_format","_interopRequireDefault","_utcToZonedTime","_repeat","_trim","obj","__esModule","_typeof","Symbol","iterator","constructor","prototype","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","value","_toPropertyKey","configurable","writable","arg","_toPrimitive","String","input","hint","prim","toPrimitive","undefined","res","call","TypeError","Number","dateFormatRepetitions","full","medium","isDateFormat","stringFormat","getStringFormat","timeZone","_ref","_ref$date","date","_ref$time","time","dateFormat","repeat","timeFormat","timeZoneFormat","trim","concat","formatDateString","locale","getDateLocale","options","renderedDate","utcToZonedTime","actualFormat","format","exports"],"sources":["../../../../src/Calendar/utils/formatDateString.ts"],"sourcesContent":["/**\n * Copyright (c) 2023 Google LLC\n * SPDX-License-Identifier: MIT\n */\n\nimport { getDateLocale } from '@looker/i18n';\nimport format from 'date-fns-tz/format';\nimport utcToZonedTime from 'date-fns-tz/utcToZonedTime';\nimport type { Locale } from 'date-fns';\nimport repeat from 'lodash/repeat';\nimport trim from 'lodash/trim';\n\ntype Full = 'full';\ntype Long = 'long';\ntype Medium = 'medium';\ntype Short = 'short';\n\ntype Formats = Full | Long | Medium | Short;\n\nconst dateFormatRepetitions: Record<Formats, number> = {\n  full: 4,\n  long: 3,\n  medium: 2,\n  short: 1,\n};\n\nexport type DateFormats = keyof typeof dateFormatRepetitions;\n\nexport type DateTimeOptions = {\n  date?: boolean;\n  time?: boolean;\n};\n\nconst isDateFormat = (stringFormat: string) =>\n  dateFormatRepetitions[stringFormat as DateFormats];\n\nconst getStringFormat = (\n  stringFormat: DateFormats,\n  timeZone: undefined | string = undefined,\n  { date = true, time = true }: DateTimeOptions\n) => {\n  const dateFormat = repeat('P', dateFormatRepetitions[stringFormat]); // PPP... is localized date format in date-fns\n  const timeFormat = repeat('p', dateFormatRepetitions[stringFormat]); // ppp... is localized time format in date-fns\n  const timeZoneFormat = repeat('z', dateFormatRepetitions[stringFormat]); /// zzz... is localize timezone format in date-fns\n\n  return trim(\n    `${date ? dateFormat : ''}${time ? timeFormat : ''} ${\n      timeZone ? timeZoneFormat : ''\n    }`\n  );\n};\n\nexport const formatDateString = (\n  date?: Date,\n  stringFormat: DateFormats | string = 'P',\n  locale: Locale = getDateLocale(),\n  timeZone: undefined | string = undefined,\n  options: DateTimeOptions = {}\n): string | '' => {\n  if (!date) {\n    return '';\n  }\n\n  const renderedDate = timeZone ? utcToZonedTime(date, timeZone) : date;\n\n  const actualFormat = isDateFormat(stringFormat)\n    ? getStringFormat(stringFormat as DateFormats, timeZone, options)\n    : stringFormat;\n\n  return format(renderedDate, actualFormat, {\n    locale,\n    ...(timeZone && { timeZone }),\n  });\n};\n"],"mappings":"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"}