{"version":3,"file":"Menu.js","names":["_react","_interopRequireWildcard","require","_Popover","_utils","_MenuList","_excluded","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","_typeof","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","Symbol","iterator","constructor","_extends","assign","bind","target","i","arguments","length","source","apply","_slicedToArray","arr","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","TypeError","o","minLen","_arrayLikeToArray","n","toString","slice","name","Array","from","test","len","arr2","_i","_s","_e","_x","_r","_arr","_n","_d","next","done","push","value","err","isArray","_objectWithoutProperties","excluded","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","indexOf","propertyIsEnumerable","sourceKeys","keys","ownKeys","object","enumerableOnly","symbols","filter","sym","enumerable","_objectSpread","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","_toPropertyKey","configurable","writable","arg","_toPrimitive","String","input","hint","prim","toPrimitive","undefined","res","Number","partitionMenuProps","props","popoverPropKeys","allProps","popoverProps","listProps","Menu","forwardRef","_ref","ref","children","content","propsID","id","listRef","restProps","_partitionMenuProps","_partitionMenuProps2","useID","list","createElement","MenuList","cloneElement","Popover","exports"],"sources":["../../../src/Menu/Menu.tsx"],"sourcesContent":["/**\n * Copyright (c) 2023 Google LLC\n * SPDX-License-Identifier: MIT\n */\n\nimport type { Ref, ReactElement } from 'react';\nimport React, { cloneElement, forwardRef } from 'react';\nimport type { ListProps } from '../List';\nimport type { PopoverProps, UsePopoverResponseDom } from '../Popover';\nimport { Popover, popoverPropKeys } from '../Popover';\nimport { useID } from '../utils';\nimport { MenuList } from './MenuList';\n\nexport interface MenuDomProps extends UsePopoverResponseDom {\n  'aria-controls': string;\n}\n\nexport interface MenuProps\n  extends Omit<PopoverProps, 'children'>,\n    Omit<ListProps, 'children' | 'content'> {\n  /**\n   * A ReactElement that accepts dom props\n   */\n  children: ReactElement<MenuDomProps>;\n  /**\n   * The ref to be passed to the list element (`ref` is passed to the triggering element)\n   */\n  listRef?: Ref<HTMLUListElement>;\n}\ntype PartitionProps = Omit<\n  MenuProps,\n  'children' | 'content' | 'id' | 'listRef'\n>;\ntype KeyOfPartitionProps = keyof PartitionProps;\n\n// Returns two object, the first being Popover props and the second being List props\nconst partitionMenuProps = (\n  props: PartitionProps,\n  popoverPropKeys: Array<keyof PopoverProps>\n) => {\n  const allProps = { ...props };\n  const popoverProps: Record<string, unknown> = {};\n\n  popoverPropKeys.forEach(key => {\n    if (props[key as KeyOfPartitionProps] !== undefined) {\n      popoverProps[key] = props[key as KeyOfPartitionProps];\n    }\n    delete allProps[key as KeyOfPartitionProps];\n  });\n\n  const listProps = allProps;\n\n  return [popoverProps, listProps];\n};\n\nexport const Menu = forwardRef(\n  (\n    { children, content, id: propsID, listRef, ...restProps }: MenuProps,\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    ref: Ref<any>\n  ) => {\n    const [popoverProps, listProps] = partitionMenuProps(\n      restProps,\n      popoverPropKeys\n    );\n\n    const id = useID(propsID);\n    const list = content && (\n      <MenuList id={id} {...listProps} ref={listRef} data-autofocus=\"true\">\n        {content}\n      </MenuList>\n    );\n    children = cloneElement(children, { 'aria-controls': id });\n\n    return (\n      <Popover content={list} ref={ref} {...popoverProps}>\n        {children}\n      </Popover>\n    );\n  }\n);\n"],"mappings":"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"}