{"version":3,"file":"WindowedTreeNode.js","names":["_react","_interopRequireWildcard","require","_TreeCollectionContext","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","_typeof","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","_extends","assign","bind","target","i","arguments","length","source","apply","WindowedTreeContext","createContext","partialRender","exports","WindowedTreeNode","_ref","content","firstIDinWindow","id","items","context","useContext","TreeCollectionContext","toggleNode","useCallback","isOpen","_context$toggleNode","isValidElement","_context$toggleStateM","props","children","map","item","createElement","toggleStateMap","Provider","value","density","cloneElement"],"sources":["../../../src/Tree/WindowedTreeNode.tsx"],"sourcesContent":["/**\n * Copyright (c) 2023 Google LLC\n * SPDX-License-Identifier: MIT\n */\n\nimport type { DensityProp } from '@looker/design-tokens';\nimport React, {\n  cloneElement,\n  createContext,\n  isValidElement,\n  useCallback,\n  useContext,\n} from 'react';\nimport { TreeCollectionContext } from './TreeCollectionContext';\nimport type { WindowedTreeNodeIDProps } from './types';\n\nexport type WindowedTreeContextProps = DensityProp & {\n  isOpen?: boolean;\n  partialRender: boolean;\n  toggleNode?: (isOpen: boolean) => void;\n};\n\nexport const WindowedTreeContext = createContext<WindowedTreeContextProps>({\n  partialRender: false,\n});\n\nexport const WindowedTreeNode = ({\n  content,\n  firstIDinWindow,\n  id,\n  items,\n}: WindowedTreeNodeIDProps & {\n  firstIDinWindow?: number;\n}) => {\n  // Update state for which tree nodes are opened / closed\n  const context = useContext(TreeCollectionContext);\n  const toggleNode = useCallback(\n    (isOpen: boolean) => {\n      context.toggleNode?.(id, isOpen);\n    },\n    [context, id]\n  );\n\n  if (items && isValidElement(content)) {\n    // insert the items as children\n    const props = {\n      children: items.map(item => (\n        <WindowedTreeNode\n          firstIDinWindow={firstIDinWindow}\n          {...item}\n          key={item.id}\n        />\n      )),\n    };\n    const isOpen = context.toggleStateMap?.[id]?.isOpen;\n\n    return (\n      <WindowedTreeContext.Provider\n        value={{\n          density: context.density,\n          isOpen,\n          partialRender: firstIDinWindow ? id < firstIDinWindow : false,\n          toggleNode,\n        }}\n      >\n        {cloneElement(content, props)}\n      </WindowedTreeContext.Provider>\n    );\n  }\n  return content;\n};\n"],"mappings":"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"}