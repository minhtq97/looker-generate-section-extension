{"version":3,"file":"FieldPickerItem.js","names":["_react","_interopRequireWildcard","require","_material","_materialOutlined","_","_2","_utils","_ListItem","_ReplaceText","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","_typeof","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","_slicedToArray","arr","i","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","TypeError","o","minLen","_arrayLikeToArray","n","toString","slice","constructor","name","Array","from","test","len","length","arr2","_i","Symbol","iterator","_s","_e","_x","_r","_arr","_n","_d","next","done","push","value","err","isArray","HighlightContext","createContext","term","exports","FieldPickerItem","_ref","_ref$children","children","_ref$color","color","_ref$filter","filter","_ref$pivot","pivot","_ref$selected","selected","_useState","useState","_useState2","isFieldMenuOpen","setIsFieldMenuOpen","_useContext","useContext","_useState3","_useState4","isFilter","setIsFilter","_useState5","_useState6","isPivot","setIsPivot","_useState7","_useState8","isSelected","setIsSelected","toggleMenu","detailContent","createElement","Fragment","Tooltip","placement","content","IconButton","shape","icon","Info","label","Menu","isOpen","setOpen","density","MenuItem","MoreVert","tooltipPlacement","toggleField","_listItemDimensions","listItemDimensions","height","LkFieldItem","detail","options","accessory","hoverDisclosure","width","onKeyDown","event","metaKey","alert","concat","currentTarget","target","Flex","onClick","alignItems","overflow","Truncate","ReplaceText","match","HoverDisclosure","visible","SubdirectoryArrowLeft","toggle","toggleBackground","toggleColor","undefined","FilterList"],"sources":["../../../../src/LkFieldTree/stories/FieldPickerItem.tsx"],"sourcesContent":["/*\n\n MIT License\n\n Copyright (c) 2022 Looker Data Sciences, Inc.\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated documentation files (the \"Software\"), to deal\n in the Software without restriction, including without limitation the rights\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n copies of the Software, and to permit persons to whom the Software is\n furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in all\n copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n SOFTWARE.\n\n */\n\nimport React, { createContext, useContext, useState } from 'react';\nimport type { ReactNode } from 'react';\nimport {\n  FilterList,\n  MoreVert,\n  SubdirectoryArrowLeft,\n} from '@styled-icons/material';\nimport { Info } from '@styled-icons/material-outlined';\nimport type { ToggleColor } from '../..';\nimport { IconButton, Menu, MenuItem, Tooltip, Flex, Truncate } from '../..';\nimport { LkFieldItem } from '..';\nimport { HoverDisclosure } from '../../utils';\nimport { listItemDimensions } from '../../ListItem';\nimport { ReplaceText } from '../../ReplaceText';\n\nexport const HighlightContext = createContext({ term: '' });\n\ntype FieldPickerItemProps = {\n  color?: ToggleColor;\n  filter?: boolean;\n  pivot?: boolean;\n  selected?: boolean;\n  children?: ReactNode;\n};\n\nexport const FieldPickerItem = ({\n  children = 'Cost',\n  color = 'dimension',\n  filter = false,\n  pivot = false,\n  selected = false,\n}: FieldPickerItemProps) => {\n  const [isFieldMenuOpen, setIsFieldMenuOpen] = useState<boolean>(false);\n  const { term } = useContext(HighlightContext);\n\n  const [isFilter, setIsFilter] = useState(filter);\n  const [isPivot, setIsPivot] = useState(pivot);\n  const [isSelected, setIsSelected] = useState(selected);\n\n  const toggleMenu = () =>\n    isFieldMenuOpen ? setIsFieldMenuOpen(false) : setIsFieldMenuOpen(true);\n\n  const detailContent = (\n    <>\n      <Tooltip placement=\"top\" content=\"Some exciting info or something\">\n        <IconButton shape=\"square\" icon={<Info />} label=\"Info\" />\n      </Tooltip>\n      <Menu\n        isOpen={isFieldMenuOpen}\n        setOpen={toggleMenu}\n        density={-1}\n        content={\n          <>\n            <MenuItem>Brie</MenuItem>\n            <MenuItem>Cheddar</MenuItem>\n            <MenuItem>Gouda</MenuItem>\n          </>\n        }\n      >\n        <IconButton\n          shape=\"square\"\n          icon={<MoreVert />}\n          label=\"Options\"\n          tooltipPlacement=\"top\"\n        />\n      </Menu>\n    </>\n  );\n\n  const toggleField = () => setIsSelected(!isSelected);\n\n  const { height } = listItemDimensions(-3);\n\n  return (\n    <LkFieldItem\n      color={color}\n      selected={isSelected}\n      detail={{\n        content: detailContent,\n        options: {\n          accessory: true,\n          hoverDisclosure: !isFieldMenuOpen,\n          width: 48,\n        },\n      }}\n      onKeyDown={event => {\n        if (event.key === 'Enter' && event.metaKey) {\n          alert(`CMD + Enter'ed on ${children}!`);\n        } else if (\n          event.key === 'Enter' &&\n          event.currentTarget === event.target\n        ) {\n          toggleField();\n        }\n      }}\n    >\n      <Flex>\n        <Flex\n          onClick={toggleField}\n          height={height}\n          alignItems=\"center\"\n          overflow=\"hidden\"\n          width=\"100%\"\n        >\n          <Truncate>\n            <ReplaceText match={term}>{children}</ReplaceText>\n          </Truncate>\n        </Flex>\n        <HoverDisclosure visible={isPivot}>\n          <IconButton\n            icon={<SubdirectoryArrowLeft />}\n            onClick={() => setIsPivot(!isPivot)}\n            shape=\"square\"\n            toggle={isPivot}\n            toggleBackground\n            toggleColor={color}\n            label=\"Pivot\"\n            tooltipPlacement=\"top\"\n          />\n        </HoverDisclosure>\n        <HoverDisclosure visible={isFilter} width={isPivot ? 24 : undefined}>\n          <IconButton\n            onClick={() => setIsFilter(!isFilter)}\n            shape=\"square\"\n            toggle={isFilter}\n            toggleBackground\n            toggleColor={color}\n            icon={<FilterList />}\n            label=\"Filter\"\n            tooltipPlacement=\"top\"\n          />\n        </HoverDisclosure>\n      </Flex>\n    </LkFieldItem>\n  );\n};\n"],"mappings":"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"}