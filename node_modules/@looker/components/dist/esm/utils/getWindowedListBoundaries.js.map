{"version":3,"file":"getWindowedListBoundaries.js","names":["React","initialResult","after","before","end","start","getWindowedListBoundaries","buffer","height","scrollPosition","enabled","itemCount","itemHeight","spacerTag","_objectSpread","undefined","top","Math","floor","bottom","ceil","afterLength","afterHeight","beforeHeight","Spacer","createElement","style"],"sources":["../../../src/utils/getWindowedListBoundaries.tsx"],"sourcesContent":["/**\n * Copyright (c) 2023 Google LLC\n * SPDX-License-Identifier: MIT\n */\n\nimport React from 'react';\nimport type { ReactNode } from 'react';\n\nexport type WindowSpacerTag = 'div' | 'li' | 'tr';\n\nexport interface GetWindowedListBoundaryProps {\n  /**\n   * If false, the start and end values will be the entire list length\n   * @default true\n   */\n  enabled?: boolean;\n  /**\n   * The total number of items in the list\n   */\n  itemCount: number;\n  /**\n   * The height of an individual item\n   */\n  itemHeight: number;\n  /**\n   * The number of items to render above and below the visible area\n   * @default 5\n   */\n  buffer?: number;\n  /**\n   * The height of the scrollable container\n   */\n  height?: number;\n  /**\n   * The scroll position of the list in the container\n   */\n  scrollPosition?: number;\n  /**\n   * Tag to use for the spacers above and below the window\n   */\n  spacerTag?: WindowSpacerTag;\n}\n\nexport type WindowResult = {\n  start: number;\n  end: number;\n  before: ReactNode;\n  after: ReactNode;\n};\n\nconst initialResult = { after: null, before: null, end: 0, start: 0 };\n\nexport function getWindowedListBoundaries({\n  buffer = 5,\n  height,\n  scrollPosition,\n  enabled = true,\n  itemCount,\n  itemHeight,\n  spacerTag = 'div',\n}: GetWindowedListBoundaryProps): WindowResult {\n  if (!enabled) return { ...initialResult, end: itemCount - 1 };\n\n  if (scrollPosition === undefined || height === undefined)\n    // scroll position and height probably undefined on initial render\n    // best to render no list items before we have these values\n    return initialResult;\n\n  const top = Math.floor(scrollPosition / itemHeight);\n  const bottom = Math.ceil((height + scrollPosition) / itemHeight);\n\n  const start = top - buffer < 0 ? 0 : top - buffer;\n  const end = bottom + buffer > itemCount - 1 ? itemCount - 1 : bottom + buffer;\n  const afterLength = itemCount - 1 - end;\n\n  const afterHeight = afterLength * itemHeight;\n  const beforeHeight = start * itemHeight;\n\n  const Spacer = spacerTag;\n  // after & before are spacers to make scrolling smooth\n  const before =\n    beforeHeight > 0 ? (\n      <Spacer style={{ height: `${beforeHeight}px` }} data-testid=\"before\" />\n    ) : null;\n  const after =\n    afterHeight > 0 ? (\n      <Spacer style={{ height: `${afterHeight}px` }} data-testid=\"after\" />\n    ) : null;\n\n  return {\n    after,\n    before,\n    end,\n    start,\n  };\n}\n"],"mappings":";;;;;AAKA,OAAOA,KAAK,MAAM,OAAO;AA6CzB,MAAMC,aAAa,GAAG;EAAEC,KAAK,EAAE,IAAI;EAAEC,MAAM,EAAE,IAAI;EAAEC,GAAG,EAAE,CAAC;EAAEC,KAAK,EAAE;AAAE,CAAC;AAErE,OAAO,SAASC,yBAAyBA,CAAC;EACxCC,MAAM,GAAG,CAAC;EACVC,MAAM;EACNC,cAAc;EACdC,OAAO,GAAG,IAAI;EACdC,SAAS;EACTC,UAAU;EACVC,SAAS,GAAG;AACgB,CAAC,EAAgB;EAC7C,IAAI,CAACH,OAAO,EAAE,OAAAI,aAAA,CAAAA,aAAA,KAAYb,aAAa;IAAEG,GAAG,EAAEO,SAAS,GAAG;EAAC;EAE3D,IAAIF,cAAc,KAAKM,SAAS,IAAIP,MAAM,KAAKO,SAAS,EAGtD,OAAOd,aAAa;EAEtB,MAAMe,GAAG,GAAGC,IAAI,CAACC,KAAK,CAACT,cAAc,GAAGG,UAAU,CAAC;EACnD,MAAMO,MAAM,GAAGF,IAAI,CAACG,IAAI,CAAC,CAACZ,MAAM,GAAGC,cAAc,IAAIG,UAAU,CAAC;EAEhE,MAAMP,KAAK,GAAGW,GAAG,GAAGT,MAAM,GAAG,CAAC,GAAG,CAAC,GAAGS,GAAG,GAAGT,MAAM;EACjD,MAAMH,GAAG,GAAGe,MAAM,GAAGZ,MAAM,GAAGI,SAAS,GAAG,CAAC,GAAGA,SAAS,GAAG,CAAC,GAAGQ,MAAM,GAAGZ,MAAM;EAC7E,MAAMc,WAAW,GAAGV,SAAS,GAAG,CAAC,GAAGP,GAAG;EAEvC,MAAMkB,WAAW,GAAGD,WAAW,GAAGT,UAAU;EAC5C,MAAMW,YAAY,GAAGlB,KAAK,GAAGO,UAAU;EAEvC,MAAMY,MAAM,GAAGX,SAAS;EAExB,MAAMV,MAAM,GACVoB,YAAY,GAAG,CAAC,GACdvB,KAAA,CAAAyB,aAAA,CAACD,MAAM;IAACE,KAAK,EAAE;MAAElB,MAAM,EAAG,GAAEe,YAAa;IAAI,CAAE;IAAC,eAAY;EAAQ,CAAE,CAAC,GACrE,IAAI;EACV,MAAMrB,KAAK,GACToB,WAAW,GAAG,CAAC,GACbtB,KAAA,CAAAyB,aAAA,CAACD,MAAM;IAACE,KAAK,EAAE;MAAElB,MAAM,EAAG,GAAEc,WAAY;IAAI,CAAE;IAAC,eAAY;EAAO,CAAE,CAAC,GACnE,IAAI;EAEV,OAAO;IACLpB,KAAK;IACLC,MAAM;IACNC,GAAG;IACHC;EACF,CAAC;AACH"}